create table users (
                       id int primary key generated by default as identity,
                       username varchar not null,
                       email varchar not null,
                       password_hash int,
                       token varchar
);


create table account (
                         id int primary key generated by default as identity,
                         name varchar not null,
                         balance decimal(15, 2) default 0.0,
                         user_id int references users(id) on delete cascade,
                         is_active boolean default true,
                         currency varchar(3) not null
);


create table categories(
                           id int primary key generated by default as identity,
                           name varchar not null,
                           type varchar check ( type in ('INCOME', 'EXPENSE') )
);


create table transaction (
                             id int primary key generated by default as identity,
                             amount decimal(15, 2) not null,
                             description text,
                             date timestamp default current_timestamp,
                             account_id int references account(id) on delete cascade,
                             category_id int references categories(id) on delete cascade
);

